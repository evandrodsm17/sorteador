<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BIG EV Sorteador</title>

    <style>
      :root {
        --bg: #05070a;
        --card: rgba(17, 24, 39, 0.9);
        --primary: #8b5cf6;
        --secondary: #06b6d4;
        --accent: #f43f5e;
        --text: #f8fafc;
        --border: rgba(255, 255, 255, 0.08);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        padding: 15px;
        font-family: Inter, system-ui, sans-serif;
        background: var(--bg);
        background-image: radial-gradient(
          circle at 50% -20%,
          #1e1b4b,
          transparent
        );
        color: var(--text);
      }

      h1 {
        text-align: center;
        font-size: clamp(1.2rem, 3vw, 2rem);
      }

      input,
      textarea {
        width: 100%;
        padding: 10px;
        margin-bottom: 8px;
        border-radius: 10px;
        background: rgba(0, 0, 0, 0.35);
        border: 1px solid var(--border);
        color: white;
      }

      textarea {
        height: 110px;
        resize: none;
      }

      input[type="range"] {
        accent-color: var(--primary);
      }

      .main {
        max-width: 1300px;
        margin: auto;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      @media (min-width: 1024px) {
        .main {
          flex-direction: row;
        }
      }

      .glass {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 18px;
        padding: 18px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        flex: 1;
      }

      button {
        width: 100%;
        border: none;
        border-radius: 10px;
        padding: 12px;
        font-weight: 700;
        cursor: pointer;
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--secondary), var(--primary));
        color: white;
      }

      .btn-sortear {
        background: var(--primary);
        color: white;
        margin-bottom: 10px;
      }

      .btn-reset {
        background: var(--accent);
        color: white;
      }

      .lista {
        max-height: 380px;
        overflow-y: auto;
      }

      .item {
        padding: 10px;
        margin: 6px 0;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.05);
        text-align: center;
      }

      .item.active {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        transform: scale(1.05);
        box-shadow: 0 0 14px rgba(139, 92, 246, 0.8);
      }

      .resultado {
        background: rgba(255, 255, 255, 0.15);
        font-weight: 600;
      }

      .hidden {
        display: none;
      }
    </style>
  </head>

  <body>
    <h1>ðŸŽ² BIG EV SORTEADOR</h1>

    <div class="main">
      <!-- CONFIG -->
      <div class="glass" id="config">
        <h3>ConfiguraÃ§Ã£o</h3>

        <input id="labelA" placeholder="Nome da Lista A" />
        <textarea id="inputA" placeholder="Itens da Lista A"></textarea>

        <input id="labelB" placeholder="Nome da Lista B" />
        <textarea id="inputB" placeholder="Itens da Lista B"></textarea>

        <label>Velocidade</label>
        <input type="range" min="50" max="200" value="100" id="velocidade" />

        <button class="btn-primary" onclick="salvar()">SALVAR</button>
      </div>

      <!-- CONTROLES -->
      <div class="glass hidden" id="controls">
        <button class="btn-sortear" onclick="sortearTudo()">SORTEAR</button>
        <button class="btn-reset" onclick="resetar()">RESETAR</button>
      </div>

      <!-- LISTA A -->
      <div class="glass hidden" id="boxA">
        <h3 id="tituloA"></h3>
        <div id="listaA" class="lista"></div>
      </div>

      <!-- LISTA B -->
      <div class="glass hidden" id="boxB">
        <h3 id="tituloB"></h3>
        <div id="listaB" class="lista"></div>
      </div>

      <!-- RESULTADOS -->
      <div class="glass hidden" id="boxR">
        <h3>Resultados</h3>
        <div id="listaResultados" class="lista"></div>
      </div>
    </div>

    <script>
      const PAUSA = 800;
      let sorteando = false;

      function salvar() {
        if (!inputA.value.trim() || !inputB.value.trim()) {
          alert("Preencha as duas listas");
          return;
        }

        tituloA.innerText = labelA.value || "Lista A";
        tituloB.innerText = labelB.value || "Lista B";

        render(listaA, inputA.value);
        render(listaB, inputB.value);

        config.classList.add("hidden");
        controls.classList.remove("hidden");
        boxA.classList.remove("hidden");
        boxB.classList.remove("hidden");
        boxR.classList.remove("hidden");
      }

      function render(container, texto) {
        container.innerHTML = "";
        texto
          .split("\n")
          .map((x) => x.trim())
          .filter(Boolean)
          .forEach((v) => {
            const d = document.createElement("div");
            d.className = "item";
            d.innerText = v;
            container.appendChild(d);
          });
      }

      function animar(lista, cb) {
        let i = 0;
        const vel = +velocidade.value;
        const ciclos = Math.floor(Math.random() * 10 + 15);

        const timer = setInterval(() => {
          lista.forEach((el) => el.classList.remove("active"));
          lista[i % lista.length].classList.add("active");
          i++;

          if (i >= ciclos) {
            clearInterval(timer);
            cb(lista[(i - 1) % lista.length]);
          }
        }, vel);
      }

      function sortearTudo() {
        if (sorteando) return;
        sorteando = true;
        proximo();
      }

      function proximo() {
        const a = [...listaA.children];
        const b = [...listaB.children];

        if (!a.length || !b.length) {
          sorteando = false;
          return;
        }

        animar(a, (elA) => {
          animar(b, (elB) => {
            setTimeout(() => {
              const r = document.createElement("div");
              r.className = "item resultado";
              r.innerText = `${elA.innerText} âžœ ${elB.innerText}`;
              listaResultados.prepend(r);

              elA.remove();
              elB.remove();

              setTimeout(proximo, 400);
            }, PAUSA);
          });
        });
      }

      function resetar() {
        location.reload();
      }
    </script>
  </body>
</html>
