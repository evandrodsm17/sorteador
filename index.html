<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sorteador Visual Autom√°tico</title>

    <style>
      :root {
        --bg: #05070a;
        --card: rgba(17, 24, 39, 0.9);
        --primary: #8b5cf6;
        --secondary: #06b6d4;
        --accent: #f43f5e;
        --text: #f8fafc;
        --border: rgba(255, 255, 255, 0.08);
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        padding: 15px;
        font-family: Inter, system-ui, sans-serif;
        background: var(--bg);
        background-image: radial-gradient(
          circle at 50% -20%,
          #1e1b4b,
          transparent
        );
        color: var(--text);
      }
      h1 {
        text-align: center;
        font-size: clamp(1.3rem, 4vw, 2.2rem);
        font-weight: 900;
        background: linear-gradient(to right, var(--primary), var(--secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      .main {
        max-width: 1300px;
        margin: auto;
        display: flex;
        flex-direction: column;
        gap: 15px;
      }
      @media (min-width: 1024px) {
        .main {
          flex-direction: row;
        }
      }
      .glass {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 18px;
        padding: 18px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        flex: 1;
      }
      textarea {
        width: 100%;
        height: 110px;
        background: rgba(0, 0, 0, 0.35);
        border: 1px solid var(--border);
        border-radius: 10px;
        color: white;
        padding: 10px;
        margin-bottom: 10px;
      }
      button {
        width: 100%;
        border: none;
        border-radius: 10px;
        padding: 12px;
        font-weight: 700;
        cursor: pointer;
      }
      .btn-primary {
        background: linear-gradient(135deg, var(--secondary), var(--primary));
        color: white;
      }
      .btn-sortear {
        background: var(--primary);
        color: white;
        margin-top: 10px;
      }
      .btn-reset {
        background: var(--accent);
        color: white;
        margin-top: 10px;
        display: none;
      }
      .lista {
        max-height: 380px;
        overflow-y: auto;
      }
      .item {
        padding: 10px;
        margin: 6px 0;
        border-radius: 8px;
        background: rgba(255, 255, 255, 0.05);
        transition: 0.15s;
        text-align: center;
      }
      .item.active {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        transform: scale(1.05);
        box-shadow: 0 0 14px rgba(139, 92, 246, 0.8);
      }
      .resultado {
        background: rgba(255, 255, 255, 0.1);
        font-weight: 600;
      }
      .hidden {
        display: none;
      }
    </style>
  </head>

  <body>
    <h1>üéØ SORTEADOR AUTOM√ÅTICO</h1>

    <div class="main">
      <!-- CONFIG -->
      <div class="glass" id="config">
        <h3>Configura√ß√£o</h3>

        <textarea
          id="inputPessoas"
          placeholder="Pessoas (1 por linha)"
        ></textarea>
        <textarea id="inputTimes" placeholder="Times (1 por linha)"></textarea>

        <label>Velocidade</label>
        <input
          type="range"
          min="50"
          max="200"
          value="100"
          id="velocidade"
          style="width: 100%"
        />

        <button class="btn-primary" onclick="salvar()">SALVAR LISTAS</button>
        <button
          class="btn-sortear hidden"
          id="btnSortear"
          onclick="sortearTudo()"
        >
          SORTEAR
        </button>
        <button class="btn-reset" id="btnReset" onclick="resetar()">
          RESETAR
        </button>
      </div>

      <!-- PESSOAS -->
      <div class="glass">
        <h3>Pessoas</h3>
        <div id="listaPessoas" class="lista"></div>
      </div>

      <!-- TIMES -->
      <div class="glass">
        <h3>Times</h3>
        <div id="listaTimes" class="lista"></div>
      </div>

      <!-- RESULTADOS -->
      <div class="glass">
        <h3>Resultados</h3>
        <div id="listaResultados" class="lista"></div>
      </div>
    </div>

    <script>
      const PAUSA_APOS_TIME = 800; // 0.8s (ajuste se quiser)

      let sorteando = false;

      function salvar() {
        const pessoas = inputPessoas.value
          .split("\n")
          .map((x) => x.trim())
          .filter(Boolean);
        const times = inputTimes.value
          .split("\n")
          .map((x) => x.trim())
          .filter(Boolean);

        if (!pessoas.length || !times.length)
          return alert("Preencha as listas");

        render("listaPessoas", pessoas);
        render("listaTimes", times);

        inputPessoas.value = "";
        inputTimes.value = "";

        inputPessoas.classList.add("hidden");
        inputTimes.classList.add("hidden");

        document.getElementById("btnSortear").classList.remove("hidden");
        document.getElementById("btnReset").style.display = "block";
      }

      function render(id, dados) {
        const box = document.getElementById(id);
        box.innerHTML = "";
        dados.forEach((v) => {
          const d = document.createElement("div");
          d.className = "item";
          d.innerText = v;
          box.appendChild(d);
        });
      }

      function animar(lista, callback) {
        let i = 0;
        const vel = Number(document.getElementById("velocidade").value);
        const ciclos = Math.floor((Math.random() * 10 + 15) * (vel / 100));

        const timer = setInterval(() => {
          lista.forEach((el) => el.classList.remove("active"));
          lista[i % lista.length].classList.add("active");
          i++;
          if (i >= ciclos) {
            clearInterval(timer);
            callback(lista[(i - 1) % lista.length]);
          }
        }, vel);
      }

      function sortearTudo() {
        if (sorteando) return;
        sorteando = true;
        proximo();
      }

      function proximo() {
        const pessoas = [...document.querySelectorAll("#listaPessoas .item")];
        const times = [...document.querySelectorAll("#listaTimes .item")];

        if (!pessoas.length || !times.length) {
          sorteando = false;
          return;
        }

        animar(pessoas, (pessoa) => {
          animar(times, (time) => {
            // mant√©m o destaque no time por um tempo
            setTimeout(() => {
              const r = document.createElement("div");
              r.className = "item resultado";
              r.innerHTML = `${pessoa.innerText} ‚ûú ${time.innerText}`;
              listaResultados.prepend(r);

              pessoa.remove();
              time.remove();

              setTimeout(proximo, 400);
            }, PAUSA_APOS_TIME);
          });
        });
      }

      function resetar() {
        location.reload();
      }
    </script>
  </body>
</html>
